{% extends 'base.html' %}
{% block title %}Inicio{% endblock %}
{% block content %}
{% load static %}

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">


<style>
  @keyframes slideInFromLeft {
    0% {
      transform: translateX(-100%);
      opacity: 0;
    }
    100% {
      transform: translateX(0);
      opacity: 1;
    }
  }

  .slide-in {
    animation: slideInFromLeft 0.6s ease-out;
  }
</style>

<style>
  :root {
    --color-primario: #0d6efd;
    --color-primario-hover: #084cd6;
    --color-fondo: #ffffff;
    --color-claro: #f8f9fa;
    --sombra: 0 4px 12px rgba(0,0,0,0.1);
  }


  .carousel-container {
    max-width: 1100px;
    margin: 3rem auto 2rem auto;
    box-shadow: var(--sombra);
    border-radius: 0.75rem;
    overflow: hidden;
  }

  .carousel-img {
    max-height: 450px;
    object-fit: cover;
  }

  .carousel-caption {
    background: linear-gradient(to bottom, rgba(0,0,0,0.6), rgba(0,0,0,0.3));
    border-radius: 0.5rem;
    padding: 1rem 1.2rem;
    max-width: 60%;
    left: 20%;
  }

  .carousel-caption h5 {
    font-weight: 700;
    font-size: 1.6rem;
    color: #fff;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
  }

  .carousel-caption p {
    font-size: 1rem;
    color: #f1f1f1;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
  }

  .buttons-container {
    max-width: 1100px;
    margin: 2rem auto 4rem auto;
    padding: 2rem;
    background: var(--color-fondo);
    border-radius: 0.75rem;
    box-shadow: var(--sombra);
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    gap: 2rem;
  }

  .btn-block {
    flex: 1 1 180px;
    max-width: 220px;
    text-align: center;
  }

  .btn-block a {
    display: inline-block;
    background-color: var(--color-primario);
    color: white;
    padding: 0.75rem 1.4rem;
    border-radius: 0.5rem;
    font-weight: 600;
    text-decoration: none;
    width: 100%;
    transition: all 0.3s ease;
  }

  .btn-block a:hover {
    background-color: var(--color-primario-hover);
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }

  .btn-block i {
    font-size: 1.5rem;
    margin-bottom: 0.4rem;
    display: block;
  }

  .btn-block p {
    margin-top: 0.6rem;
    font-size: 0.9rem;
    color: #555;
    line-height: 1.3;
  }

  .news-section, .faq-section {
    max-width: 1100px;
    margin: 3rem auto;
    background: white;
    border-radius: 0.75rem;
    box-shadow: var(--sombra);
    padding: 2rem;
  }

  .news-section ul {
    list-style: none;
    padding-left: 0;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
  }

  .news-section li {
    background-color: #f1f3f5;
    padding: 1rem;
    border-radius: 0.5rem;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  }

  .faq-section details {
    margin-bottom: 1rem;
    padding: 0.5rem 0;
    border-bottom: 1px solid #ddd;
  }

  details summary {
    font-weight: 600;
    cursor: pointer;
    position: relative;
    padding-right: 1.5rem;
  }

  details summary::after {
    content: "▸";
    position: absolute;
    right: 0;
    transition: transform 0.3s;
  }

  details[open] summary::after {
    transform: rotate(90deg);
  }

  .contact-section {
    max-width: 1100px;
    margin: 3rem auto 6rem auto;
    background: #e9ecef;
    border-radius: 0.75rem;
    padding: 2rem;
    text-align: center;
  }

  @media (max-width: 768px) {
    .carousel-caption {
      max-width: 90%;
      left: 5%;
      font-size: 0.9rem;
    }
    .buttons-container {
      padding: 1rem;
    }
  }
  .news-section .card {
  border-radius: 0.75rem;
  overflow: hidden;
  transition: transform 0.2s ease;
}
.news-section .card:hover {
  transform: scale(1.02);
}
</style>

<div id="carouselExample" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
  <div class="carousel-inner">
    {% for slide in slides %}
      <div class="carousel-item {% if forloop.first %}active{% endif %}">
        <img src="{{ slide.imagen.url }}" class="d-block w-100 carousel-img" alt="{{ slide.titulo }}">
        <div class="carousel-caption d-none d-md-block">
          <h5>{{ slide.titulo }}</h5>
          <p>{{ slide.descripcion }}</p>
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- Controles para moverse manualmente -->
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Anterior</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Siguiente</span>
  </button>

  <!-- Indicadores (opcionales) -->
  <div class="carousel-indicators">
    {% for slide in slides %}
      <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="{{ forloop.counter0 }}" 
              class="{% if forloop.first %}active{% endif %}" aria-current="{% if forloop.first %}true{% endif %}" 
              aria-label="Slide {{ forloop.counter }}"></button>
    {% endfor %}
  </div>
</div>

<div class="buttons-container slide-in rounded-2">
  <div class="btn-block">
    <a href="{% url 'ver_carrito' %}">
      <i class="bi bi-cart-fill"></i> Carrito
    </a>
    <p>Visualiza los productos que has seleccionado para adquirir o reservar.</p>
  </div>
  <div class="btn-block">
    <a href="{% url 'listar_materiales' %}">
      <i class="bi bi-box-seam"></i>Inventario
    </a>
    <p>Explora el catálogo completo de materiales y equipos disponibles.</p>
  </div>
  <div class="btn-block">
    <a href="{% url 'listar_solicitudes' %}">
      <i class="bi bi-file-earmark-text"></i>Mis Solicitudes
    </a>
    <p>Consulta el estado de tus solicitudes y gestiona las que tengas pendientes.</p>
  </div>
  <div class="btn-block">
    <a href="{% url 'perfil' %}">
      <i class="bi bi-person-circle"></i>Perfil
    </a>
    <p>Administra tu información personal y preferencias de usuario.</p>
  </div>
</div>

<div class="news-section rounded-2">
  <h3 style="margin-bottom: 1.5rem; font-weight: 700;">Últimas Noticias de Tecnología</h3>
  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for noticia in noticias %}
      <div class="col">
        <div class="card h-100 shadow-sm border-0">
          {% if noticia.urlToImage %}
            <img src="{{ noticia.urlToImage }}" class="card-img-top" alt="Imagen noticia" style="max-height: 180px; object-fit: cover;">
          {% endif %}
          <div class="card-body">
            <h5 class="card-title" style="font-size: 1rem;">{{ noticia.title }}</h5>
            <p class="card-text" style="font-size: 0.85rem;">{{ noticia.description|default:"Sin descripción disponible." }}</p>
          </div>
          <div class="card-footer bg-transparent">
            <small class="text-muted">{{ noticia.publishedAt|date:"d M Y H:i" }}</small><br>
            <a href="{{ noticia.url }}" target="_blank" class="btn btn-sm btn-primary mt-2">Leer más</a>
          </div>
        </div>
      </div>
    {% empty %}
      <p>No se encontraron noticias recientes.</p>
    {% endfor %}
  </div>
</div>


<div class="faq-section rounded-2 ">
  <h3 style="margin-bottom: 1.5rem; font-weight: 700;">Preguntas Frecuentes</h3>
  <details>
    <summary>¿Cómo hago una solicitud de material?</summary>
    <p>Puedes acceder a la sección "Inventario" y llenar el carrito para pedir los materiales deseados.</p>
  </details>
  <details>
    <summary>¿Puedo reservar más de un equipo a la vez?</summary>
    <p>Sí, puedes agregar varios productos a tu carrito y hacer una solicitud conjunta.</p>
  </details>
  <details>
    <summary>¿Qué hago si detecto un daño en el equipo recibido?</summary>
    <p>Contáctanos inmediatamente para gestionar la devolución o reemplazo.</p>
  </details>
</div>

<div class="contact-section rounded-2">
  <h3 style="font-weight: 700; margin-bottom: 1.5rem;">Contáctanos</h3>
  <p><strong>Dirección:</strong> Paicaví 3280, Concepción, Bío Bío, Chile</p>
  <p><strong>Email:</strong> contacto@duocuc.cl</p>
  <iframe
    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3192.6451346366463!2d-73.06051572412948!3d-36.823486172266845!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x966aff9b9efb3a8b%3A0x31c57ec89fcf6f4!2sDuoc%20UC%20-%20Sede%20Concepci%C3%B3n!5e0!3m2!1ses-419!2scl!4v1717625531887!5m2!1ses-419!2scl"
    width="100%"
    height="300"
    style="border:0; border-radius: 0.5rem;"
    allowfullscreen=""
    loading="lazy"
    referrerpolicy="no-referrer-when-downgrade">
  </iframe>
</div>


{% if messages %}
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      {% for message in messages %}
        Swal.fire({
          icon: 'success',
          title: 'Éxito',
          text: '{{ message }}',
          confirmButtonText: 'Aceptar'
        });
      {% endfor %}
    });
  </script>
{% endif %}
{% endblock %}
